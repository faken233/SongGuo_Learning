"use strict";(self["webpackChunkworkspace"]=self["webpackChunkworkspace"]||[]).push([[523],{6523:function(e,t,a){a.r(t),a.d(t,{default:function(){return p}});var s=function(){var e=this,t=e._self._c;return t("div",[t("el-page-header",{attrs:{content:"课程学习情况"},on:{back:e.goBack}}),t("el-descriptions",{attrs:{title:"课程信息"}},[t("el-descriptions-item",{attrs:{label:"课程ID"}},[e._v(e._s(this.course.courseID))]),t("el-descriptions-item",{attrs:{label:"课程名字"}},[e._v(e._s(this.course.courseName))]),t("el-descriptions-item",{attrs:{label:"课程描述"}},[e._v(e._s(this.course.description))])],1),t("br"),t("p",[e._v("选课学生表")]),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.students}},[t("el-table-column",{attrs:{prop:"studentID",label:"学生ID",width:"180"}}),t("el-table-column",{attrs:{prop:"name",label:"姓名",width:"180"}}),t("el-table-column",{attrs:{prop:"grade",label:"年级",width:"180"}}),t("el-table-column",{attrs:{prop:"className",label:"班级"}})],1),t("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[5,10,15],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handlePageChange}}),t("h1",[e._v("讨论区")]),t("div",{staticClass:"discussion"},e._l(e.replies,(function(a,s){return t("div",{key:s,staticClass:"message"},[t("div",{staticClass:"user-info"},[e.isTeacher(a.replierID)?t("span",{staticClass:"teacherName"},[e._v(e._s(a.replierName))]):e._e(),e.isStudent(a.replierID)?t("span",{staticClass:"studentName"},[e._v(e._s(a.replierName))]):e._e(),t("span",{staticClass:"time"},[e._v(e._s(e.formatReplyDateTime(a.replyDateTime)))]),t("span",{staticClass:"deleteReply"},[t("el-button",{attrs:{type:"primary",icon:"el-icon-delete"},on:{click:function(t){return e.deleteReply(a)}}})],1)]),t("div",{staticClass:"content"},[e._v(" "+e._s(a.content)+" ")])])})),0),t("el-pagination",{attrs:{"current-page":e.currentPage1,"page-sizes":[5,10,15],"page-size":e.pageSize1,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange1,"current-change":e.handlePageChange1}}),t("el-form",{attrs:{inline:!0,model:e.newReply}},[t("el-form-item",{attrs:{label:"评论"}},[t("el-input",{attrs:{type:"textarea",placeholder:"输入评论"},model:{value:e.newReply.content,callback:function(t){e.$set(e.newReply,"content",t)},expression:"newReply.content"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.submitNewReply}},[e._v("发送评论")])],1)],1)],1)},r=[],n=(a(4114),a(8355)),l={data(){let e=this.$route.query,t=e.courseID;return{course:e,courseID:t,chapters:[],students:[],currentPage:1,pageSize:5,total:100,replies:[],currentPage1:1,pageSize1:5,total1:100,newReply:{replierID:localStorage.getItem("id"),replierName:localStorage.getItem("name"),content:"",replyDateTime:"",courseID:t}}},methods:{deleteReply(e){this.$confirm("确认删除此评论?").then((()=>{n.A.get("http://localhost:8080/SongGuo_Learning/discussion/deleteReply?replierID="+e.replierID+"&replyDateTime="+e.replyDateTime+"&courseID="+e.courseID,{headers:{Token:localStorage.getItem("token")}}).then((e=>{console.log(e.data),"DELETE_OK"==e.data.message&&this.$notify.success({title:"操作成功",message:"您已成功删除一条评论!"})}))})).catch((()=>{}))},goBack(){this.$router.push("/teacher_homepage_personal_info")},handleSizeChange(e){this.pageSize=e,this.getStudentData()},handlePageChange(e){this.currentPage=e,this.getStudentData()},handleSizeChange1(e){this.pageSize1=e,this.getReplyData()},handlePageChange1(e){this.currentPage1=e,this.getReplyData()},formatReplyDateTime(e){const t=new Date(e);return t.toLocaleString()},isTeacher(e){return"1"===e.toString().charAt(0)},isStudent(e){return"2"===e.toString().charAt(0)},submitNewReply(){n.A.post("http://localhost:8080/SongGuo_Learning/discussion/addReplyToCourse",this.newReply,{headers:{Token:localStorage.getItem("token")}}).then((e=>{console.log(e.data),this.$notify.success({title:"发送成功",message:"您已成功发送一条评论"})}))},getStudentData(){n.A.get("http://localhost:8080/SongGuo_Learning/teacher/getEnrolledStudents?courseID="+this.courseID+"&pageSize="+this.pageSize+"&currentPage="+this.currentPage,{headers:{Token:localStorage.getItem("token")}}).then((e=>{console.log(e.data),this.students=e.data.data}))},getReplyData(){n.A.get("http://localhost:8080/SongGuo_Learning/discussion/getCourseReplies?courseID="+this.courseID+"&pageSize="+this.pageSize1+"&currentPage="+this.currentPage1,{headers:{Token:localStorage.getItem("token")}}).then((e=>{console.log(e.data),"TOKEN_IS_NULL"!=e.data.message?this.replies=e.data.data:this.$router.push("/studentlogin")}))}},mounted(){this.getStudentData(),this.getReplyData()}},i=l,o=a(1656),c=(0,o.A)(i,s,r,!1,null,"59f53187",null),p=c.exports}}]);
//# sourceMappingURL=523.8d73bde4.js.map