"use strict";(self["webpackChunkworkspace"]=self["webpackChunkworkspace"]||[]).push([[385],{8385:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});var i=function(){var e=this,t=e._self._c;return t("div",[t("el-container",[t("el-header",{staticStyle:{"text-align":"right"}},[t("el-dropdown",{on:{command:e.logout}},[t("i",{staticClass:"el-icon-setting",staticStyle:{"margin-right":"15px"}}),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{on:{click:e.logout}},[e._v("注销")])],1)],1),e._v(e._s(this.teacher.name)+", 你好! ")],1),t("el-container",[t("el-aside",{staticStyle:{"background-color":"rgb(238, 241, 246)"},attrs:{width:"200px"}},[t("el-menu",{attrs:{"default-openeds":["1"],router:"true"}},[t("el-submenu",{attrs:{index:"1"}},[t("template",{slot:"title"},[t("i",{staticClass:"el-icon-message"}),e._v("菜单")]),t("el-menu-item-group",[t("el-menu-item",{attrs:{index:"/teacher_homepage_personal_info"}},[e._v("个人信息")]),t("el-menu-item",{attrs:{index:"/teacher_courses_manage"}},[e._v("课程管理")]),t("el-menu-item",{attrs:{index:"/teacher_course_learning_progress"}},[e._v("课程情况")])],1)],2)],1)],1),t("el-main",[t("el-button",{attrs:{type:"text"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("修改信息")]),t("el-descriptions",{attrs:{title:"用户信息"}},[t("el-descriptions-item",{attrs:{label:"用户ID"}},[e._v(e._s(this.teacher.id))]),t("el-descriptions-item",{attrs:{label:"手机号"}},[e._v(e._s(this.teacher.phone))]),t("el-descriptions-item",{attrs:{label:"姓名"}},[e._v(e._s(this.teacher.name))]),t("el-descriptions-item",{attrs:{label:"邮箱"}},[e._v(" "+e._s(this.teacher.email)+" ")]),t("el-descriptions-item",{attrs:{label:"QQ号"}},[e._v(" "+e._s(this.teacher.qq)+" ")]),t("el-descriptions-item",{attrs:{label:"自我描述"}},[e._v(e._s(this.teacher.description))])],1)],1)],1)],1),t("el-dialog",{attrs:{title:"修改信息",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("el-form",{ref:"form",attrs:{model:e.tempteacher,rules:e.rules}},[t("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.tempteacher.email,callback:function(t){e.$set(e.tempteacher,"email",t)},expression:"tempteacher.email"}})],1),t("el-form-item",{attrs:{label:"qq",prop:"qq"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.tempteacher.qq,callback:function(t){e.$set(e.tempteacher,"qq",t)},expression:"tempteacher.qq"}})],1),t("el-form-item",{attrs:{label:"描述"}},[t("el-input",{attrs:{type:"textarea",autocomplete:"off"},model:{value:e.tempteacher.description,callback:function(t){e.$set(e.tempteacher,"description",t)},expression:"tempteacher.description"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.updateTeacher("form")}}},[e._v("提交更新")]),t("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")])],1)],1)],1)},r=[],o=(a(4114),a(8355)),s={data(){return{dialogFormVisible:!1,tempteacher:{teacherID:localStorage.getItem("id"),email:"",qq:"",description:""},teacher:{id:localStorage.getItem("id"),name:"",email:"",qq:"",description:""},token:localStorage.getItem("token"),rules:{email:[{pattern:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,message:"请输入正确的邮箱格式",trigger:"blur"}],qq:[{pattern:/^[1-9][0-9]{4,}$/,message:"请输入正确的QQ号格式",trigger:"blur"}]}}},methods:{logout(){console.log("进行注销"),this.$confirm("确认注销?").then((()=>{localStorage.removeItem("id"),localStorage.removeItem("token"),localStorage.removeItem("name"),this.$router.push("/")})).catch((()=>{}))},updateTeacher(e){console.log(this.tempteacher.name),this.$refs[e].validate((e=>{if(!e)return!1;o.A.post("http://localhost:8080/SongGuo_Learning/teacher/updateInfo",this.tempteacher,{headers:{token:this.token}}).then((e=>{"UPDATE_OK"==e.data.message?(this.teacher.email=this.tempteacher.email,this.teacher.qq=this.tempteacher.qq,this.teacher.description=this.tempteacher.description,this.$notify.success({title:"修改成功",message:"你的个人信息已修改成功!"})):this.$notify.error({title:"修改失败",message:"发生未知错误!"}),this.dialogFormVisible=!1}))}))}},mounted(){let e=localStorage.getItem("token");o.A.get("http://localhost:8080/SongGuo_Learning/teacher/getInfo?id="+localStorage.getItem("id"),{headers:{token:e}}).then((e=>{"TOKEN_IS_NULL"!=e.data.message?(this.teacher.id=e.data.data.teacherID,this.teacher.name=e.data.data.name,this.teacher.phone=e.data.data.phoneNumber,this.teacher.email=e.data.data.email,this.teacher.qq=e.data.data.qq,this.teacher.description=e.data.data.description,localStorage.setItem("name",this.teacher.name)):this.$router.push("/studentlogin")}))}},l=s,n=a(1656),c=(0,n.A)(l,i,r,!1,null,null,null),m=c.exports}}]);
//# sourceMappingURL=385.f909e6ff.js.map