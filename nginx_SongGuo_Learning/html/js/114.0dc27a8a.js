"use strict";(self["webpackChunkworkspace"]=self["webpackChunkworkspace"]||[]).push([[114],{3114:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});var r=function(){var e=this,t=e._self._c;return t("div",[t("el-container",[t("el-header",{staticStyle:{"text-align":"right"}}),t("el-container",[t("el-aside",{staticStyle:{"background-color":"rgb(238, 241, 246)"},attrs:{width:"200px"}},[t("el-menu",{attrs:{"default-openeds":["1"],router:"true"}},[t("el-submenu",{attrs:{index:"1"}},[t("template",{slot:"title"},[t("i",{staticClass:"el-icon-message"}),e._v("菜单")]),t("el-menu-item-group",[t("el-menu-item",{attrs:{index:"/teacher_homepage_personal_info"}},[e._v("个人信息")]),t("el-menu-item",{attrs:{index:"/teacher_courses_manage"}},[e._v("课程管理")]),t("el-menu-item",{attrs:{index:"/teacher_course_learning_progress"}},[e._v("课程情况")])],1)],2)],1)],1),t("el-main",[t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("新增课程")]),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.courses}},[t("el-table-column",{attrs:{prop:"courseID",label:"课程ID",width:"180"}}),t("el-table-column",{attrs:{prop:"courseName",label:"课程名",width:"180"}}),t("el-table-column",{attrs:{prop:"description",label:"课程介绍"}}),t("el-table-column",{attrs:{prop:"startDateTime",formatter:e.formatStartDateTime,label:"起始日期"}}),t("el-table-column",{attrs:{prop:"endDateTime",formatter:e.formatEndDateTime,label:"结课日期"}}),t("el-table-column",{attrs:{prop:"maxStudents",label:"可报名学生人数"}}),t("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.coursePage(a.row)}}},[e._v("课程章节编辑页面")]),t("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(t){return e.deleteCourse(a.row.courseID)}}},[e._v("删除")])]}}])})],1)],1)],1)],1),t("el-dialog",{attrs:{title:"填写课程信息",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("el-form",{ref:"newCourse",attrs:{model:e.newCourse,rules:e.rules}},[t("el-form-item",{attrs:{label:"课程名",prop:"courseName","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.newCourse.courseName,callback:function(t){e.$set(e.newCourse,"courseName",t)},expression:"newCourse.courseName"}})],1),t("el-form-item",{attrs:{label:"开始时间",prop:"startDateTime","label-width":e.formLabelWidth}},[t("el-date-picker",{attrs:{type:"datetime","picker-options":e.startPickerOptions},on:{change:e.handleStartDateChange},model:{value:e.newCourse.startDateTime,callback:function(t){e.$set(e.newCourse,"startDateTime",t)},expression:"newCourse.startDateTime"}})],1),t("el-form-item",{attrs:{label:"结束时间",prop:"endDateTime","label-width":e.formLabelWidth}},[t("el-date-picker",{attrs:{type:"datetime","picker-options":e.endPickerOptions},model:{value:e.newCourse.endDateTime,callback:function(t){e.$set(e.newCourse,"endDateTime",t)},expression:"newCourse.endDateTime"}})],1),t("el-form-item",{attrs:{label:"可报名学生人数",prop:"maxStudent","label-width":e.formLabelWidth}},[t("el-input",{model:{value:e.newCourse.maxStudents,callback:function(t){e.$set(e.newCourse,"maxStudents",t)},expression:"newCourse.maxStudents"}})],1),t("el-form-item",{attrs:{label:"描述",prop:"description","label-width":e.formLabelWidth}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.newCourse.description,callback:function(t){e.$set(e.newCourse,"description",t)},expression:"newCourse.description"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")])],1)],1)],1)},s=[],o=(a(4114),a(8355)),i={data(){return{courses:[],dialogFormVisible:!1,newCourse:{teacherID:localStorage.getItem("id"),courseName:"",startDateTime:"",endDateTime:"",maxStudents:"",description:""},rules:{courseName:[{required:!0,message:"请输入课程名",trigger:"blur"}],startDateTime:[{required:!0,message:"请选择日期",trigger:"blur"}],endDateTime:[{required:!0,message:"请输入日期",trigger:"blur"}],maxStudents:[{required:!0,message:"请输入数字",trigger:"blur"},{pattern:/^\d+$/,message:"只能输入数字",trigger:"blur"}],description:[{required:!0,message:"输入课程描述",trigger:"blur"}]},startPickerOptions:{disabledDate:e=>!!this.newCourse.endDateTime&&e.getTime()>new Date(this.newCourse.endDateTime).getTime()},endPickerOptions:{disabledDate:e=>!!this.newCourse.startDateTime&&e.getTime()<new Date(this.newCourse.startDateTime).getTime()}}},methods:{submitForm(){this.$refs.newCourse.validate((e=>{if(!e)return console.log("表单验证失败，请检查输入内容"),!1;console.log("表单验证通过，可以提交表单数据"),o.A.post("http://localhost:8080/SongGuo_Learning/teacher/addCourse",this.newCourse,{headers:{Token:localStorage.getItem("token")}}).then((e=>{"ADD_OK"==e.data.message&&(this.dialogFormVisible=!1,this.$notify.success({title:"添加成功",message:"您已成功添加一个新课程!请刷新页面更新数据..."})),console.log(e.data)}))}))},handleStartDateChange(e){this.$nextTick((()=>{e&&this.newCourse.endDateTime&&new Date(this.newCourse.endDateTime).getTime()<new Date(e).getTime()&&(this.newCourse.endDateTime="")}))},deleteCourse(e){this.$confirm("确认删除此课程? 所有章节和题目信息都将被同步删除!").then((()=>{o.A.get("http://localhost:8080/SongGuo_Learning/teacher/deleteCourse?courseID="+e,{headers:{Token:localStorage.getItem("token")}}).then((e=>{console.log(e.data),"DELETE_OK"==e.data.message&&this.$notify.success({title:"操作成功",message:"您已成功删除一套课程,请刷新页面..."})}))})).catch((()=>{}))},coursePage(e){this.$router.push({path:"/teacher_course_edit_page",query:e})},formatStartDateTime(e){const t=e.startDateTime,a=new Date(t);return a.toLocaleString()},formatEndDateTime(e){const t=e.endDateTime,a=new Date(t);return a.toLocaleString()}},mounted(){o.A.get("http://localhost:8080/SongGuo_Learning/teacher/selectCourses?id="+localStorage.getItem("id"),{headers:{Token:localStorage.getItem("token")}}).then((e=>{"TOKEN_IS_NULL"==e.data.message?this.$router.push("/studentlogin"):(console.log(e.data),this.courses=e.data.data)}))}},l=i,n=a(1656),u=(0,n.A)(l,r,s,!1,null,null,null),m=u.exports}}]);
//# sourceMappingURL=114.0dc27a8a.js.map