"use strict";(self["webpackChunkworkspace"]=self["webpackChunkworkspace"]||[]).push([[251],{3251:function(t,e,s){s.r(e),s.d(e,{default:function(){return u}});var a=function(){var t=this,e=t._self._c;return e("div",[e("el-container",[e("el-header",{staticStyle:{"text-align":"right"}},[e("el-dropdown",{on:{command:t.logout}},[e("i",{staticClass:"el-icon-setting",staticStyle:{"margin-right":"15px"}}),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{on:{click:t.logout}},[t._v("注销")])],1)],1),t._v(t._s(this.student.name)+", 你好!")],1),e("el-container",[e("el-aside",{staticStyle:{"background-color":"rgb(238, 241, 246)"},attrs:{width:"200px"}},[e("el-menu",{attrs:{"default-openeds":["1"],router:"true"}},[e("el-submenu",{attrs:{index:"1"}},[e("template",{slot:"title"},[e("i",{staticClass:"el-icon-message"}),t._v("菜单")]),e("el-menu-item-group",[e("el-menu-item",{attrs:{index:"/student_homepage_personal_info"}},[t._v("个人信息")]),e("el-menu-item",{attrs:{index:"/student_course_choose_to_learn"}},[t._v("课程学习")]),e("el-menu-item",{attrs:{index:"/student_course_select"}},[t._v("选择课程")])],1)],2)],1)],1),e("el-main",[e("el-button",{attrs:{type:"text"},on:{click:function(e){t.dialogFormVisible=!0}}},[t._v("修改信息")]),e("el-descriptions",{attrs:{title:"用户信息"}},[e("el-descriptions-item",{attrs:{label:"用户ID"}},[t._v(t._s(this.student.id))]),e("el-descriptions-item",{attrs:{label:"班级"}},[t._v(t._s(this.student.className))]),e("el-descriptions-item",{attrs:{label:"姓名"}},[t._v(t._s(this.student.name))]),e("el-descriptions-item",{attrs:{label:"年级"}},[t._v(" "+t._s(this.student.grade)+" ")]),e("el-descriptions-item",{attrs:{label:"电话"}},[t._v(" "+t._s(this.student.phone)+" ")])],1)],1)],1)],1),e("el-dialog",{attrs:{title:"修改信息",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[e("el-form",{attrs:{model:t.tempstudent}},[e("el-form-item",{attrs:{label:"年级"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.tempstudent.grade,callback:function(e){t.$set(t.tempstudent,"grade",e)},expression:"tempstudent.grade"}})],1),e("el-form-item",{attrs:{label:"qq"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.tempstudent.qq,callback:function(e){t.$set(t.tempstudent,"qq",e)},expression:"tempstudent.qq"}})],1),e("el-form-item",{attrs:{label:"班级"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.tempstudent.className,callback:function(e){t.$set(t.tempstudent,"className",e)},expression:"tempstudent.className"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:t.updateStudent}},[t._v("提交更新")]),e("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")])],1)],1)],1)},o=[],l=(s(4114),s(8355)),n={data(){return{dialogFormVisible:!1,tempstudent:{studentID:localStorage.getItem("id"),phone:"",grade:"",className:""},student:{studentID:localStorage.getItem("id"),name:"",phone:"",grade:"",className:""},token:localStorage.getItem("token")}},methods:{logout(){console.log("进行注销"),this.$confirm("确认注销?").then((()=>{localStorage.removeItem("id"),localStorage.removeItem("token"),localStorage.removeItem("name"),this.$router.push("/")})).catch((()=>{}))},updateStudent(){console.log(this.tempstudent.name),l.A.post("http://localhost:8080/SongGuo_Learning/student/updateInfo",this.tempstudent,{headers:{token:this.token}}).then((t=>{"UPDATE_OK"==t.data.message?(this.student.className=this.tempstudent.className,this.student.grade=this.tempstudent.grade,this.$notify.success({title:"修改成功",message:"你的个人信息已修改成功!"})):this.$notify.error({title:"修改失败",message:"发生未知错误!"}),this.dialogFormVisible=!1}))}},mounted(){let t=localStorage.getItem("token");l.A.get("http://localhost:8080/SongGuo_Learning/student/getInfo?id="+localStorage.getItem("id"),{headers:{token:t}}).then((t=>{"TOKEN_IS_NULL"!=t.data.message?(this.student.id=t.data.data.studentID,this.student.name=t.data.data.name,this.student.phone=t.data.data.phoneNumber,this.student.grade=t.data.data.grade,this.student.className=t.data.data.className,localStorage.setItem("name",this.student.name),localStorage.setItem("id",this.student.studentID)):this.$router.push("/studentlogin")}))}},i=n,d=s(1656),r=(0,d.A)(i,a,o,!1,null,null,null),u=r.exports}}]);
//# sourceMappingURL=251.d6966154.js.map